<!DOCTYPE html>
<html lang="ru">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>AI Code Editor with Perplexity</title>
Â  Â  <style>
Â  Â  Â  Â  * {
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  }

Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
Â  Â  Â  Â  Â  Â  height: 100vh;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  background: #1e1e1e;
Â  Â  Â  Â  Â  Â  color: #d4d4d4;
Â  Â  Â  Â  }

Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  height: 100vh;
Â  Â  Â  Â  }

Â  Â  Â  Â  .file-manager {
Â  Â  Â  Â  Â  Â  width: 280px;
Â  Â  Â  Â  Â  Â  background: #252526;
Â  Â  Â  Â  Â  Â  border-right: 1px solid #3e3e42;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  }

Â  Â  Â  Â  .file-manager-header {
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  background: #2d2d30;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #3e3e42;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  gap: 8px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .header-title {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  .header-buttons {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 5px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .file-list {
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  Â  Â  padding: 5px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .file-item, .folder-item {
Â  Â  Â  Â  Â  Â  padding: 6px 8px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  border-radius: 3px;
Â  Â  Â  Â  Â  Â  margin: 2px 0;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 6px;
Â  Â  Â  Â  Â  Â  transition: background 0.2s;
Â  Â  Â  Â  Â  Â  user-select: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  .file-item:hover, .folder-item:hover {
Â  Â  Â  Â  Â  Â  background: #2a2d2e;
Â  Â  Â  Â  }

Â  Â  Â  Â  .file-item.active {
Â  Â  Â  Â  Â  Â  background: #094771;
Â  Â  Â  Â  }

Â  Â  Â  Â  .folder-item {
Â  Â  Â  Â  Â  Â  font-weight: 500;
Â  Â  Â  Â  }

Â  Â  Â  Â  .folder-item.open {
Â  Â  Â  Â  Â  Â  background: #2a2d2e;
Â  Â  Â  Â  }

Â  Â  Â  Â  .folder-children {
Â  Â  Â  Â  Â  Â  padding-left: 20px;
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  .folder-children.open {
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  }

Â  Â  Â  Â  .folder-icon {
Â  Â  Â  Â  Â  Â  transition: transform 0.2s;
Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .folder-icon.open {
Â  Â  Â  Â  Â  Â  transform: rotate(90deg);
Â  Â  Â  Â  }

Â  Â  Â  Â  .file-icon {
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .file-name {
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  text-overflow: ellipsis;
Â  Â  Â  Â  Â  Â  white-space: nowrap;
Â  Â  Â  Â  }

Â  Â  Â  Â  .file-name.editing {
Â  Â  Â  Â  Â  Â  background: #3c3c3c;
Â  Â  Â  Â  Â  Â  padding: 2px 4px;
Â  Â  Â  Â  Â  Â  border-radius: 2px;
Â  Â  Â  Â  Â  Â  outline: 1px solid #0e639c;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn {
Â  Â  Â  Â  Â  Â  background: #0e639c;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  padding: 6px 12px;
Â  Â  Â  Â  Â  Â  border-radius: 3px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  Â  Â  transition: background 0.2s;
Â  Â  Â  Â  Â  Â  white-space: nowrap;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn:hover {
Â  Â  Â  Â  Â  Â  background: #1177bb;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn:disabled {
Â  Â  Â  Â  Â  Â  background: #555;
Â  Â  Â  Â  Â  Â  cursor: not-allowed;
Â  Â  Â  Â  Â  Â  opacity: 0.5;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-small {
Â  Â  Â  Â  Â  Â  padding: 4px 8px;
Â  Â  Â  Â  Â  Â  font-size: 11px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-success {
Â  Â  Â  Â  Â  Â  background: #16825d;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-success:hover {
Â  Â  Â  Â  Â  Â  background: #1e9d6f;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-ai {
Â  Â  Â  Â  Â  Â  background: #7c3aed;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-ai:hover:not(:disabled) {
Â  Â  Â  Â  Â  Â  background: #8b5cf6;
Â  Â  Â  Â  }

Â  Â  Â  Â  .editor-area {
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  }

Â  Â  Â  Â  .toolbar {
Â  Â  Â  Â  Â  Â  background: #2d2d30;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #3e3e42;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  Â  }

Â  Â  Â  Â  .ai-toolbar {
Â  Â  Â  Â  Â  Â  background: #2a2438;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #4c1d95;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 8px;
Â  Â  Â  Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  .ai-toolbar-label {
Â  Â  Â  Â  Â  Â  color: #a78bfa;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  font-size: 13px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .editor-tabs {
Â  Â  Â  Â  Â  Â  background: #2d2d30;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #3e3e42;
Â  Â  Â  Â  Â  Â  padding: 5px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 5px;
Â  Â  Â  Â  Â  Â  overflow-x: auto;
Â  Â  Â  Â  }

Â  Â  Â  Â  .editor-tab {
Â  Â  Â  Â  Â  Â  padding: 8px 15px;
Â  Â  Â  Â  Â  Â  background: #1e1e1e;
Â  Â  Â  Â  Â  Â  border: 1px solid #3e3e42;
Â  Â  Â  Â  Â  Â  border-radius: 3px 3px 0 0;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  Â  Â  white-space: nowrap;
Â  Â  Â  Â  }

Â  Â  Â  Â  .editor-tab.active {
Â  Â  Â  Â  Â  Â  background: #1e1e1e;
Â  Â  Â  Â  Â  Â  border-bottom-color: #1e1e1e;
Â  Â  Â  Â  }

Â  Â  Â  Â  .editor-tab.modified::after {
Â  Â  Â  Â  Â  Â  content: 'â—';
Â  Â  Â  Â  Â  Â  color: #fff;
Â  Â  Â  Â  }

Â  Â  Â  Â  .editor-tab .close-btn {
Â  Â  Â  Â  Â  Â  background: none;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  color: #d4d4d4;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  padding: 0 5px;
Â  Â  Â  Â  Â  Â  font-size: 16px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .editor-tab .close-btn:hover {
Â  Â  Â  Â  Â  Â  color: #ffffff;
Â  Â  Â  Â  }

Â  Â  Â  Â  #editor-container {
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  }

Â  Â  Â  Â  .output-panel {
Â  Â  Â  Â  Â  Â  height: 200px;
Â  Â  Â  Â  Â  Â  background: #1e1e1e;
Â  Â  Â  Â  Â  Â  border-top: 1px solid #3e3e42;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  }

Â  Â  Â  Â  .output-tabs {
Â  Â  Â  Â  Â  Â  background: #2d2d30;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 2px;
Â  Â  Â  Â  Â  Â  padding: 5px;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #3e3e42;
Â  Â  Â  Â  }

Â  Â  Â  Â  .output-tab {
Â  Â  Â  Â  Â  Â  padding: 6px 12px;
Â  Â  Â  Â  Â  Â  background: #1e1e1e;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  color: #d4d4d4;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  border-radius: 3px 3px 0 0;
Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .output-tab.active {
Â  Â  Â  Â  Â  Â  background: #094771;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  }

Â  Â  Â  Â  .output-content {
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  .output-content.active {
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  }

Â  Â  Â  Â  .error-panel-header {
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  Â  Â  color: #f48771;
Â  Â  Â  Â  }

Â  Â  Â  Â  .error-item {
Â  Â  Â  Â  Â  Â  padding: 8px;
Â  Â  Â  Â  Â  Â  margin: 5px 0;
Â  Â  Â  Â  Â  Â  background: #2d2d30;
Â  Â  Â  Â  Â  Â  border-left: 3px solid #f48771;
Â  Â  Â  Â  Â  Â  border-radius: 3px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .info-message {
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  color: #8c8c8c;
Â  Â  Â  Â  }

Â  Â  Â  Â  .directory-name {
Â  Â  Â  Â  Â  Â  color: #4ec9b0;
Â  Â  Â  Â  Â  Â  font-size: 11px;
Â  Â  Â  Â  Â  Â  margin-top: 5px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .ai-message {
Â  Â  Â  Â  Â  Â  margin: 10px 0;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .ai-message.user {
Â  Â  Â  Â  Â  Â  background: #2d2d30;
Â  Â  Â  Â  Â  Â  border-left: 3px solid #0e639c;
Â  Â  Â  Â  }

Â  Â  Â  Â  .ai-message.assistant {
Â  Â  Â  Â  Â  Â  background: #2a2438;
Â  Â  Â  Â  Â  Â  border-left: 3px solid #7c3aed;
Â  Â  Â  Â  }

Â  Â  Â  Â  .ai-message-header {
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  margin-bottom: 5px;
Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .ai-message-content {
Â  Â  Â  Â  Â  Â  white-space: pre-wrap;
Â  Â  Â  Â  Â  Â  word-wrap: break-word;
Â  Â  Â  Â  Â  Â  font-size: 13px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .loading-indicator {
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  Â  Â  color: #a78bfa;
Â  Â  Â  Â  Â  Â  font-style: italic;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .loading-indicator.active {
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  }

Â  Â  Â  Â  .custom-prompt-input {
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  background: #3c3c3c;
Â  Â  Â  Â  Â  Â  border: 1px solid #4c1d95;
Â  Â  Â  Â  Â  Â  color: #d4d4d4;
Â  Â  Â  Â  Â  Â  padding: 6px 10px;
Â  Â  Â  Â  Â  Â  border-radius: 3px;
Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
Â  Â  <div class="container">
Â  Â  Â  Â  <div class="file-manager">
Â  Â  Â  Â  Â  Â  <div class="file-manager-header">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="header-title">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>ğŸ“ Ğ¤Ğ°Ğ¹Ğ»Ñ‹</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="header-buttons">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-small btn-success" onclick="openDirectory()">ğŸ“‚ ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-small" onclick="createNewFile()">+ Ğ¤Ğ°Ğ¹Ğ»</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-small" onclick="createNewFolder()">ğŸ“ ĞŸĞ°Ğ¿ĞºĞ°</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="directory-name" id="directoryName"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="file-list" id="fileList">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-message">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ "ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ" Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="editor-area">
Â  Â  Â  Â  Â  Â  <div class="toolbar">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" onclick="saveCurrentFile()">ğŸ’¾ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" onclick="runCode()">â–¶ Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" onclick="checkErrors()">ğŸ” ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="ai-toolbar">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="ai-toolbar-label">ğŸ¤– AI:</span>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-small btn-ai" onclick="askAI('ĞĞ°Ğ¹Ğ´Ğ¸ Ğ¸ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²ÑŒ Ğ²ÑĞµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ² ĞºĞ¾Ğ´Ğµ')">ğŸ”§ Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-small btn-ai" onclick="askAI('ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€ÑƒĞ¹ ĞºĞ¾Ğ´')">âš¡ ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-small btn-ai" onclick="askAI('Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¸')">ğŸ“ ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¸</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-small btn-ai" onclick="askAI('ĞĞ±ÑŠÑÑĞ½Ğ¸ ĞºĞ¾Ğ´')">ğŸ’¡ ĞĞ±ÑŠÑÑĞ½Ğ¸Ñ‚ÑŒ</button>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" class="custom-prompt-input" id="customPrompt" placeholder="Ğ¡Ğ²Ğ¾Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ...">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-small btn-ai" onclick="customAIRequest()">â–¶</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="editor-tabs" id="editorTabs"></div>
Â  Â  Â  Â  Â  Â  <div id="editor-container"></div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="output-panel">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="output-tabs">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="output-tab active" onclick="switchOutputTab('errors', event)">âš  ĞÑˆĞ¸Ğ±ĞºĞ¸</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="output-tab" onclick="switchOutputTab('ai', event)">ğŸ¤– AI Ğ§Ğ°Ñ‚</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div class="output-content active" id="errorsContent">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="error-panel-header">âš  ĞÑˆĞ¸Ğ±ĞºĞ¸ Ğ¸ Ğ²Ñ‹Ğ²Ğ¾Ğ´</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="errorMessages"></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div class="output-content" id="aiContent">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="aiMessages"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="loading-indicator" id="loadingIndicator">ğŸ”„ AI Ğ´ÑƒĞ¼Ğ°ĞµÑ‚...</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script src="https://unpkg.com/monaco-editor@0.45.0/min/vs/loader.js"></script>
Â  Â  <script>
Â  Â  Â  Â  const PERPLEXITY_API_KEY = '';
Â  Â  Â  Â Â 
Â  Â  Â  Â  let editor;
Â  Â  Â  Â  let directoryHandle = null;
Â  Â  Â  Â  let fileHandles = new Map();
Â  Â  Â  Â  let folderHandles = new Map();
Â  Â  Â  Â  let openFiles = new Map();
Â  Â  Â  Â  let currentFilePath = null;
Â  Â  Â  Â  let clickTimeout = null;
Â  Â  Â  Â  let lastClickedElement = null;
Â  Â  Â  Â  let aiConversationHistory = [];

Â  Â  Â  Â  require.config({ paths: { 'vs': 'https://unpkg.com/monaco-editor@0.45.0/min/vs' }});
Â  Â  Â  Â Â 
Â  Â  Â  Â  require(['vs/editor/editor.main'], function() {
Â  Â  Â  Â  Â  Â  editor = monaco.editor.create(document.getElementById('editor-container'), {
Â  Â  Â  Â  Â  Â  Â  Â  value: '// ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Ğ¿Ğ°Ğ¿ĞºÑƒ Ğ¸ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ñ„Ğ°Ğ¹Ğ»\n// Ğ˜Ğ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ AI Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ ĞºĞ¾Ğ´Ğ°!\n',
Â  Â  Â  Â  Â  Â  Â  Â  language: 'javascript',
Â  Â  Â  Â  Â  Â  Â  Â  theme: 'vs-dark',
Â  Â  Â  Â  Â  Â  Â  Â  automaticLayout: true,
Â  Â  Â  Â  Â  Â  Â  Â  fontSize: 14,
Â  Â  Â  Â  Â  Â  Â  Â  minimap: { enabled: true },
Â  Â  Â  Â  Â  Â  Â  Â  scrollBeyondLastLine: false,
Â  Â  Â  Â  Â  Â  Â  Â  wordWrap: 'on'
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  editor.onDidChangeModelContent(() => {
Â  Â  Â  Â  Â  Â  Â  Â  if (currentFilePath && openFiles.has(currentFilePath)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const fileData = openFiles.get(currentFilePath);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fileData.content = editor.getValue();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fileData.modified = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateTabs();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  });

Â  Â  Â  Â  // AI Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ˜
Â  Â  Â  Â  async function askAI(prompt) {
Â  Â  Â  Â  Â  Â  if (!editor) {
Â  Â  Â  Â  Â  Â  Â  Â  alert('Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ ĞµÑ‰Ñ‘ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ÑÑ...');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const code = editor.getValue();
Â  Â  Â  Â  Â  Â  const language = currentFilePath ? getLanguageFromFilename(currentFilePath) : 'javascript';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  disableAIButtons();
Â  Â  Â  Â  Â  Â  showLoading(true);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const userMessage = `${prompt}\n\n\`\`\`${language}\n${code}\n\`\`\``;
Â  Â  Â  Â  Â  Â  addAIMessage('user', prompt, code.substring(0, 100) + (code.length > 100 ? '...' : ''));
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch('https://api.perplexity.ai/chat/completions', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Authorization': `Bearer ${PERPLEXITY_API_KEY}`,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Content-Type': 'application/json'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  model: 'sonar',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messages: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  role: 'system',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  content: 'Ğ¢Ñ‹ AI-Ğ°ÑÑĞ¸ÑÑ‚ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ. ĞšĞ¾Ğ³Ğ´Ğ° Ñ‚ĞµĞ±Ñ Ğ¿Ñ€Ğ¾ÑÑÑ‚ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ´, Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°Ğ¹ Ğ¢ĞĞ›Ğ¬ĞšĞ ĞºĞ¾Ğ´ Ğ±ĞµĞ· Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğ¹ Ğ² Ğ±Ğ»Ğ¾ĞºĞµ ```
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ...aiConversationHistory.slice(-6),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { role: 'user', content: userMessage }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  temperature: 0.2,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  max_tokens: 2000
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (!response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const errorData = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(`API Error: ${response.status} - ${errorData.error || 'Unknown error'}`);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const data = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  const aiResponse = data.choices.message.content;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  aiConversationHistory.push(
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { role: 'user', content: userMessage },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { role: 'assistant', content: aiResponse }
Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  addAIMessage('assistant', 'AI ĞÑ‚Ğ²ĞµÑ‚:', aiResponse);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (aiResponse.includes('```') && !prompt.toLowerCase().includes('Ğ¾Ğ±ÑŠÑÑĞ½Ğ¸')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const codeMatch = aiResponse.match(/``````/);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (codeMatch) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const extractedCode = codeMatch[1].trim();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  editor.setValue(extractedCode);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('âœ“ ĞšĞ¾Ğ´ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½ AI!', 'success');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  switchOutputTab('ai', null);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error('AI Error:', error);
Â  Â  Â  Â  Â  Â  Â  Â  addAIMessage('assistant', 'ĞÑˆĞ¸Ğ±ĞºĞ°:', error.message);
Â  Â  Â  Â  Â  Â  Â  Â  showError(`ĞÑˆĞ¸Ğ±ĞºĞ° AI: ${error.message}`);
Â  Â  Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  Â  Â  showLoading(false);
Â  Â  Â  Â  Â  Â  Â  Â  enableAIButtons();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function customAIRequest() {
Â  Â  Â  Â  Â  Â  const prompt = document.getElementById('customPrompt').value.trim();
Â  Â  Â  Â  Â  Â  if (!prompt) {
Â  Â  Â  Â  Â  Â  Â  Â  alert('Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  askAI(prompt);
Â  Â  Â  Â  Â  Â  document.getElementById('customPrompt').value = '';
Â  Â  Â  Â  }

Â  Â  Â  Â  function addAIMessage(role, header, content) {
Â  Â  Â  Â  Â  Â  const messagesDiv = document.getElementById('aiMessages');
Â  Â  Â  Â  Â  Â  const messageDiv = document.createElement('div');
Â  Â  Â  Â  Â  Â  messageDiv.className = `ai-message ${role}`;
Â  Â  Â  Â  Â  Â  messageDiv.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="ai-message-header">${role === 'user' ? 'ğŸ‘¤ Ğ’Ñ‹' : 'ğŸ¤– AI'}: ${escapeHtml(header)}</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="ai-message-content">${escapeHtml(content)}</div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  messagesDiv.appendChild(messageDiv);
Â  Â  Â  Â  Â  Â  messagesDiv.scrollTop = messagesDiv.scrollHeight;
Â  Â  Â  Â  }

Â  Â  Â  Â  function escapeHtml(text) {
Â  Â  Â  Â  Â  Â  const div = document.createElement('div');
Â  Â  Â  Â  Â  Â  div.textContent = text;
Â  Â  Â  Â  Â  Â  return div.innerHTML;
Â  Â  Â  Â  }

Â  Â  Â  Â  function showLoading(show) {
Â  Â  Â  Â  Â  Â  document.getElementById('loadingIndicator').classList.toggle('active', show);
Â  Â  Â  Â  }

Â  Â  Â  Â  function disableAIButtons() {
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.btn-ai').forEach(btn => btn.disabled = true);
Â  Â  Â  Â  }

Â  Â  Â  Â  function enableAIButtons() {
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.btn-ai').forEach(btn => btn.disabled = false);
Â  Â  Â  Â  }

Â  Â  Â  Â  function switchOutputTab(tab, event) {
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.output-tab').forEach(t => t.classList.remove('active'));
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.output-content').forEach(c => c.classList.remove('active'));
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (event && event.target) {
Â  Â  Â  Â  Â  Â  Â  Â  event.target.classList.add('active');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  document.querySelector(`[onclick*="${tab}"]`).classList.add('active');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  document.getElementById(tab + 'Content').classList.add('active');
Â  Â  Â  Â  }

Â  Â  Â  Â  // Ğ¤ĞĞ™Ğ›ĞĞ’ĞĞ¯ Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ
Â  Â  Â  Â  async function openDirectory() {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  directoryHandle = await window.showDirectoryPicker({ mode: 'readwrite' });
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('directoryName').textContent = `ğŸ“‚ ${directoryHandle.name}`;
Â  Â  Â  Â  Â  Â  Â  Â  await loadDirectory();
Â  Â  Â  Â  Â  Â  Â  Â  showMessage('âœ“ ĞŸĞ°Ğ¿ĞºĞ° Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ°!', 'success');
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  if (error.name !== 'AbortError') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showError(`ĞÑˆĞ¸Ğ±ĞºĞ°: ${error.message}`);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function loadDirectory() {
Â  Â  Â  Â  Â  Â  fileHandles.clear();
Â  Â  Â  Â  Â  Â  folderHandles.clear();
Â  Â  Â  Â  Â  Â  await scanDirectory(directoryHandle, '');
Â  Â  Â  Â  Â  Â  renderFileTree();
Â  Â  Â  Â  }

Â  Â  Â  Â  async function scanDirectory(dirHandle, path) {
Â  Â  Â  Â  Â  Â  const entries = [];
Â  Â  Â  Â  Â  Â  for await (const entry of dirHandle.values()) {
Â  Â  Â  Â  Â  Â  Â  Â  const fullPath = path ? `${path}/${entry.name}` : entry.name;
Â  Â  Â  Â  Â  Â  Â  Â  if (entry.kind === 'file') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fileHandles.set(fullPath, entry);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  entries.push({ type: 'file', name: entry.name, path: fullPath });
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  folderHandles.set(fullPath, entry);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const children = await scanDirectory(entry, fullPath);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  entries.push({ type: 'folder', name: entry.name, path: fullPath, children });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  return entries.sort((a, b) => {
Â  Â  Â  Â  Â  Â  Â  Â  if (a.type !== b.type) return a.type === 'folder' ? -1 : 1;
Â  Â  Â  Â  Â  Â  Â  Â  return a.name.localeCompare(b.name);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderFileTree() {
Â  Â  Â  Â  Â  Â  const fileList = document.getElementById('fileList');
Â  Â  Â  Â  Â  Â  fileList.innerHTML = '';
Â  Â  Â  Â  Â  Â  if (!directoryHandle) {
Â  Â  Â  Â  Â  Â  Â  Â  fileList.innerHTML = '<div class="info-message">ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¿Ğ°Ğ¿ĞºÑƒ â†’</div>';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  scanDirectory(directoryHandle, '').then(entries => {
Â  Â  Â  Â  Â  Â  Â  Â  entries.forEach(entry => fileList.appendChild(createTreeNode(entry)));
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  function createTreeNode(entry, level = 0) {
Â  Â  Â  Â  Â  Â  const container = document.createElement('div');
Â  Â  Â  Â  Â  Â  if (entry.type === 'folder') {
Â  Â  Â  Â  Â  Â  Â  Â  const folderDiv = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  folderDiv.className = 'folder-item';
Â  Â  Â  Â  Â  Â  Â  Â  folderDiv.style.paddingLeft = `${level * 15 + 8}px`;
Â  Â  Â  Â  Â  Â  Â  Â  folderDiv.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="folder-icon">â–¶</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="file-icon">ğŸ“</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="file-name" contenteditable="false">${escapeHtml(entry.name)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  setupDoubleClick(folderDiv, entry);
Â  Â  Â  Â  Â  Â  Â  Â  const childrenDiv = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  childrenDiv.className = 'folder-children';
Â  Â  Â  Â  Â  Â  Â  Â  folderDiv.onclick = (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (e.target.contentEditable === 'true') return;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  toggleFolder(folderDiv, childrenDiv);
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  container.appendChild(folderDiv);
Â  Â  Â  Â  Â  Â  Â  Â  if (entry.children) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  entry.children.forEach(child => childrenDiv.appendChild(createTreeNode(child, level + 1)));
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  container.appendChild(childrenDiv);
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  const fileDiv = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  fileDiv.className = 'file-item';
Â  Â  Â  Â  Â  Â  Â  Â  fileDiv.style.paddingLeft = `${level * 15 + 26}px`;
Â  Â  Â  Â  Â  Â  Â  Â  fileDiv.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="file-icon">${getFileIcon(entry.name)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="file-name" contenteditable="false">${escapeHtml(entry.name)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  setupDoubleClick(fileDiv, entry);
Â  Â  Â  Â  Â  Â  Â  Â  fileDiv.onclick = async (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (e.target.contentEditable === 'true') return;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await openFile(entry.path);
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  if (currentFilePath === entry.path) fileDiv.classList.add('active');
Â  Â  Â  Â  Â  Â  Â  Â  container.appendChild(fileDiv);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  return container;
Â  Â  Â  Â  }

Â  Â  Â  Â  function setupDoubleClick(element, entry) {
Â  Â  Â  Â  Â  Â  element.addEventListener('click', function(e) {
Â  Â  Â  Â  Â  Â  Â  Â  if (e.target.contentEditable === 'true') return;
Â  Â  Â  Â  Â  Â  Â  Â  if (clickTimeout && lastClickedElement === element) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  clearTimeout(clickTimeout);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  clickTimeout = null;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  startRename(element, entry);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lastClickedElement = element;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  clickTimeout = setTimeout(() => clickTimeout = null, 300);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  function startRename(element, entry) {
Â  Â  Â  Â  Â  Â  const nameSpan = element.querySelector('.file-name');
Â  Â  Â  Â  Â  Â  const oldName = nameSpan.textContent;
Â  Â  Â  Â  Â  Â  nameSpan.contentEditable = 'true';
Â  Â  Â  Â  Â  Â  nameSpan.classList.add('editing');
Â  Â  Â  Â  Â  Â  nameSpan.focus();
Â  Â  Â  Â  Â  Â  const range = document.createRange();
Â  Â  Â  Â  Â  Â  const sel = window.getSelection();
Â  Â  Â  Â  Â  Â  const textNode = nameSpan.firstChild;
Â  Â  Â  Â  Â  Â  if (entry.type === 'file') {
Â  Â  Â  Â  Â  Â  Â  Â  const dotIndex = oldName.lastIndexOf('.');
Â  Â  Â  Â  Â  Â  Â  Â  const endIndex = dotIndex > 0 ? dotIndex : oldName.length;
Â  Â  Â  Â  Â  Â  Â  Â  range.setStart(textNode, 0);
Â  Â  Â  Â  Â  Â  Â  Â  range.setEnd(textNode, endIndex);
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  range.selectNodeContents(nameSpan);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  sel.removeAllRanges();
Â  Â  Â  Â  Â  Â  sel.addRange(range);
Â  Â  Â  Â  Â  Â  const finishRename = async () => {
Â  Â  Â  Â  Â  Â  Â  Â  nameSpan.contentEditable = 'false';
Â  Â  Â  Â  Â  Â  Â  Â  nameSpan.classList.remove('editing');
Â  Â  Â  Â  Â  Â  Â  Â  const newName = nameSpan.textContent.trim();
Â  Â  Â  Â  Â  Â  Â  Â  if (newName && newName !== oldName) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await renameEntry(entry, newName);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nameSpan.textContent = oldName;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  nameSpan.onblur = finishRename;
Â  Â  Â  Â  Â  Â  nameSpan.onkeydown = (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  if (e.key === 'Enter') { e.preventDefault(); nameSpan.blur(); }
Â  Â  Â  Â  Â  Â  Â  Â  else if (e.key === 'Escape') { nameSpan.textContent = oldName; nameSpan.blur(); }
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  }

Â  Â  Â  Â  async function renameEntry(entry, newName) {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const pathParts = entry.path.split('/');
Â  Â  Â  Â  Â  Â  Â  Â  const parentPath = pathParts.slice(0, -1).join('/');
Â  Â  Â  Â  Â  Â  Â  Â  const parentHandle = parentPath ? folderHandles.get(parentPath) : directoryHandle;
Â  Â  Â  Â  Â  Â  Â  Â  if (entry.type === 'file') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const oldHandle = fileHandles.get(entry.path);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const file = await oldHandle.getFile();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const content = await file.text();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const newHandle = await parentHandle.getFileHandle(newName, { create: true });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const writable = await newHandle.createWritable();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await writable.write(content);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await writable.close();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await parentHandle.removeEntry(entry.name);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const newPath = parentPath ? `${parentPath}/${newName}` : newName;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (openFiles.has(entry.path)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const fileData = openFiles.get(entry.path);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  openFiles.delete(entry.path);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  openFiles.set(newPath, fileData);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (currentFilePath === entry.path) currentFilePath = newPath;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  await loadDirectory();
Â  Â  Â  Â  Â  Â  Â  Â  showMessage(`âœ“ ĞŸĞµÑ€ĞµĞ¸Ğ¼ĞµĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¾`, 'success');
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  showError(`ĞÑˆĞ¸Ğ±ĞºĞ°: ${error.message}`);
Â  Â  Â  Â  Â  Â  Â  Â  await loadDirectory();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function toggleFolder(folderDiv, childrenDiv) {
Â  Â  Â  Â  Â  Â  const icon = folderDiv.querySelector('.folder-icon');
Â  Â  Â  Â  Â  Â  const isOpen = childrenDiv.classList.toggle('open');
Â  Â  Â  Â  Â  Â  icon.classList.toggle('open', isOpen);
Â  Â  Â  Â  Â  Â  folderDiv.classList.toggle('open', isOpen);
Â  Â  Â  Â  }

Â  Â  Â  Â  async function openFile(path) {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  if (!openFiles.has(path)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const handle = fileHandles.get(path);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const file = await handle.getFile();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const content = await file.text();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  openFiles.set(path, { content, originalContent: content, modified: false, handle });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  currentFilePath = path;
Â  Â  Â  Â  Â  Â  Â  Â  const fileData = openFiles.get(path);
Â  Â  Â  Â  Â  Â  Â  Â  const language = getLanguageFromFilename(path);
Â  Â  Â  Â  Â  Â  Â  Â  monaco.editor.setModelLanguage(editor.getModel(), language);
Â  Â  Â  Â  Â  Â  Â  Â  editor.setValue(fileData.content);
Â  Â  Â  Â  Â  Â  Â  Â  renderFileTree();
Â  Â  Â  Â  Â  Â  Â  Â  updateTabs();
Â  Â  Â  Â  Â  Â  Â  Â  clearErrors();
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  showError(`ĞÑˆĞ¸Ğ±ĞºĞ°: ${error.message}`);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function saveCurrentFile() {
Â  Â  Â  Â  Â  Â  if (!currentFilePath || !openFiles.has(currentFilePath)) {
Â  Â  Â  Â  Â  Â  Â  Â  showError('ĞĞµÑ‚ Ñ„Ğ°Ğ¹Ğ»Ğ°');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const fileData = openFiles.get(currentFilePath);
Â  Â  Â  Â  Â  Â  Â  Â  const writable = await fileData.handle.createWritable();
Â  Â  Â  Â  Â  Â  Â  Â  await writable.write(fileData.content);
Â  Â  Â  Â  Â  Â  Â  Â  await writable.close();
Â  Â  Â  Â  Â  Â  Â  Â  fileData.modified = false;
Â  Â  Â  Â  Â  Â  Â  Â  fileData.originalContent = fileData.content;
Â  Â  Â  Â  Â  Â  Â  Â  updateTabs();
Â  Â  Â  Â  Â  Â  Â  Â  showMessage('âœ“ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¾!', 'success');
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  showError(`ĞÑˆĞ¸Ğ±ĞºĞ°: ${error.message}`);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function createNewFile() {
Â  Â  Â  Â  Â  Â  if (!directoryHandle) { showError('ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Ğ¿Ğ°Ğ¿ĞºÑƒ'); return; }
Â  Â  Â  Â  Â  Â  const name = prompt('Ğ˜Ğ¼Ñ Ñ„Ğ°Ğ¹Ğ»Ğ°:');
Â  Â  Â  Â  Â  Â  if (!name || !name.trim()) return;
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const handle = await directoryHandle.getFileHandle(name, { create: true });
Â  Â  Â  Â  Â  Â  Â  Â  const writable = await handle.createWritable();
Â  Â  Â  Â  Â  Â  Â  Â  await writable.write('');
Â  Â  Â  Â  Â  Â  Â  Â  await writable.close();
Â  Â  Â  Â  Â  Â  Â  Â  await loadDirectory();
Â  Â  Â  Â  Â  Â  Â  Â  await openFile(name);
Â  Â  Â  Â  Â  Â  Â  Â  showMessage(`âœ“ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½ "${name}"`, 'success');
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  showError(`ĞÑˆĞ¸Ğ±ĞºĞ°: ${error.message}`);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function createNewFolder() {
Â  Â  Â  Â  Â  Â  if (!directoryHandle) { showError('ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Ğ¿Ğ°Ğ¿ĞºÑƒ'); return; }
Â  Â  Â  Â  Â  Â  const name = prompt('Ğ˜Ğ¼Ñ Ğ¿Ğ°Ğ¿ĞºĞ¸:');
Â  Â  Â  Â  Â  Â  if (!name || !name.trim()) return;
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  await directoryHandle.getDirectoryHandle(name, { create: true });
Â  Â  Â  Â  Â  Â  Â  Â  await loadDirectory();
Â  Â  Â  Â  Â  Â  Â  Â  showMessage(`âœ“ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ° "${name}"`, 'success');
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  showError(`ĞÑˆĞ¸Ğ±ĞºĞ°: ${error.message}`);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateTabs() {
Â  Â  Â  Â  Â  Â  const tabsContainer = document.getElementById('editorTabs');
Â  Â  Â  Â  Â  Â  tabsContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  for (let [path, fileData] of openFiles) {
Â  Â  Â  Â  Â  Â  Â  Â  const fileName = path.split('/').pop();
Â  Â  Â  Â  Â  Â  Â  Â  const tab = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  tab.className = 'editor-tab' + (currentFilePath === path ? ' active' : '') +
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â (fileData.modified ? ' modified' : '');
Â  Â  Â  Â  Â  Â  Â  Â  tab.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span onclick="switchToFile('${path.replace(/'/g, "\\'")}')">${escapeHtml(fileName)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="close-btn" onclick="event.stopPropagation(); closeFile('${path.replace(/'/g, "\\'")}')">Ã—</button>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  tabsContainer.appendChild(tab);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function switchToFile(path) {
Â  Â  Â  Â  Â  Â  await openFile(path);
Â  Â  Â  Â  }

Â  Â  Â  Â  function closeFile(path) {
Â  Â  Â  Â  Â  Â  const fileData = openFiles.get(path);
Â  Â  Â  Â  Â  Â  if (fileData && fileData.modified && !confirm('Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ±ĞµĞ· ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ?')) return;
Â  Â  Â  Â  Â  Â  openFiles.delete(path);
Â  Â  Â  Â  Â  Â  if (currentFilePath === path) {
Â  Â  Â  Â  Â  Â  Â  Â  const remainingFiles = Array.from(openFiles.keys());
Â  Â  Â  Â  Â  Â  Â  Â  if (remainingFiles.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  openFile(remainingFiles[0]);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentFilePath = null;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  editor.setValue('// ĞĞµÑ‚ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ñ‹Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderFileTree();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  updateTabs();
Â  Â  Â  Â  }

Â  Â  Â  Â  function getLanguageFromFilename(filename) {
Â  Â  Â  Â  Â  Â  const ext = filename.split('.').pop().toLowerCase();
Â  Â  Â  Â  Â  Â  const map = {
Â  Â  Â  Â  Â  Â  Â  Â  'js': 'javascript', 'ts': 'typescript', 'py': 'python',
Â  Â  Â  Â  Â  Â  Â  Â  'html': 'html', 'css': 'css', 'json': 'json',
Â  Â  Â  Â  Â  Â  Â  Â  'xml': 'xml', 'md': 'markdown', 'cpp': 'cpp',
Â  Â  Â  Â  Â  Â  Â  Â  'c': 'c', 'cs': 'csharp', 'java': 'java',
Â  Â  Â  Â  Â  Â  Â  Â  'php': 'php', 'go': 'go', 'rs': 'rust', 'lua': 'lua',
Â  Â  Â  Â  Â  Â  Â  Â  'sql': 'sql', 'sh': 'shell', 'yaml': 'yaml'
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  return map[ext] || 'plaintext';
Â  Â  Â  Â  }

Â  Â  Â  Â  function getFileIcon(filename) {
Â  Â  Â  Â  Â  Â  const ext = filename.split('.').pop().toLowerCase();
Â  Â  Â  Â  Â  Â  const icons = {
Â  Â  Â  Â  Â  Â  Â  Â  'js': 'ğŸ“œ', 'ts': 'ğŸ“˜', 'html': 'ğŸŒ', 'css': 'ğŸ¨',
Â  Â  Â  Â  Â  Â  Â  Â  'py': 'ğŸ', 'json': 'ğŸ“‹', 'md': 'ğŸ“', 'txt': 'ğŸ“„',
Â  Â  Â  Â  Â  Â  Â  Â  'cpp': 'âš™ï¸', 'c': 'âš™ï¸', 'cs': 'ğŸ’', 'lua': 'ğŸŒ™',
Â  Â  Â  Â  Â  Â  Â  Â  'java': 'â˜•', 'php': 'ğŸ˜', 'go': 'ğŸ¹', 'rs': 'ğŸ¦€'
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  return icons[ext] || 'ğŸ“„';
Â  Â  Â  Â  }

Â  Â  Â  Â  function runCode() {
Â  Â  Â  Â  Â  Â  clearErrors();
Â  Â  Â  Â  Â  Â  const code = editor.getValue();
Â  Â  Â  Â  Â  Â  const errorMessages = document.getElementById('errorMessages');
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  if (currentFilePath && currentFilePath.endsWith('.js')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const originalLog = console.log;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const logs = [];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log = function(...args) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  logs.push(args.join(' '));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  originalLog.apply(console, args);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  eval(code);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log = originalLog;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (logs.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessages.innerHTML += `<div style="color: #4ec9b0; margin-top: 10px;"><strong>âœ“ Ğ’Ñ‹Ğ²Ğ¾Ğ´:</strong><br>${escapeHtml(logs.join('\n'))}</div>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessages.innerHTML += `<div style="color: #4ec9b0; margin-top: 10px;"><strong>âœ“ Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¾!</strong></div>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  errorMessages.innerHTML += `<div style="color: #dcdcaa; margin-top: 10px;"><strong>â„¹ Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ .js</strong></div>`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  showError(error.message);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function checkErrors() {
Â  Â  Â  Â  Â  Â  const code = editor.getValue();
Â  Â  Â  Â  Â  Â  clearErrors();
Â  Â  Â  Â  Â  Â  if (currentFilePath && currentFilePath.endsWith('.js')) {
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  new Function(code);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('errorMessages').innerHTML += `<div style="color: #4ec9b0; margin-top: 10px;"><strong>âœ“ ĞÑˆĞ¸Ğ±Ğ¾Ğº Ğ½ĞµÑ‚!</strong></div>`;
Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showError(error.message);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('errorMessages').innerHTML += `<div style="color: #dcdcaa; margin-top: 10px;"><strong>â„¹ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ´Ğ»Ñ .js</strong></div>`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function showError(message) {
Â  Â  Â  Â  Â  Â  const errorMessages = document.getElementById('errorMessages');
Â  Â  Â  Â  Â  Â  const errorDiv = document.createElement('div');
Â  Â  Â  Â  Â  Â  errorDiv.className = 'error-item';
Â  Â  Â  Â  Â  Â  errorDiv.innerHTML = `<span>${escapeHtml(message)}</span>`;
Â  Â  Â  Â  Â  Â  errorMessages.appendChild(errorDiv);
Â  Â  Â  Â  }

Â  Â  Â  Â  function showMessage(message, type) {
Â  Â  Â  Â  Â  Â  const errorMessages = document.getElementById('errorMessages');
Â  Â  Â  Â  Â  Â  const color = type === 'success' ? '#4ec9b0' : '#dcdcaa';
Â  Â  Â  Â  Â  Â  errorMessages.innerHTML += `<div style="color: ${color}; margin-top: 10px;"><strong>${escapeHtml(message)}</strong></div>`;
Â  Â  Â  Â  }

Â  Â  Â  Â  function clearErrors() {
Â  Â  Â  Â  Â  Â  document.getElementById('errorMessages').innerHTML = '';
Â  Â  Â  Â  }

Â  Â  Â  Â  document.addEventListener('keydown', (e) => {
Â  Â  Â  Â  Â  Â  if (e.ctrlKey && e.key === 's') {
Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  Â  Â  saveCurrentFile();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (e.ctrlKey && e.key === 'Enter') {
Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  Â  Â  runCode();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  document.getElementById('customPrompt').addEventListener('keydown', (e) => {
Â  Â  Â  Â  Â  Â  if (e.key === 'Enter') {
Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  Â  Â  customAIRequest();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  </script>
    <!-- Theme Toggle Button -->
    <button id="themeBtn" style="position: fixed; bottom: 20px; right: 20px; padding: 10px 15px; background: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; font-weight: bold; z-index: 1000;">ğŸŒ™ Dark Mode</button>
    
    <script>
        const themeBtn = document.getElementById('themeBtn');
        let isDarkMode = true;
        
        themeBtn.addEventListener('click', function() {
            isDarkMode = !isDarkMode;
            if (isDarkMode) {
                document.body.style.background = '#1e1e1e';
                document.body.style.color = '#d4d4d4';
                themeBtn.style.background = '#0066cc';
                themeBtn.textContent = 'ğŸŒ™ Dark Mode';
            } else {
                document.body.style.background = '#ffffff';
                document.body.style.color = '#333333';
                themeBtn.style.background = '#333333';
                themeBtn.textContent = 'â˜€ï¸ Light Mode';
            }
        });
    </script>
</body>
</html>
